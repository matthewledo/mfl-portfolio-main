---
import { HiArrowRight } from "react-icons/hi";

export interface Props {
  title: string;
  description: string;
  image: string;
  technologies: string[];
  demo: string;
  code: string;
  category?: string;
  index: number; 
  moreDetails?: string;
}

const { title, description, image, technologies, demo, code, category, index, moreDetails } = Astro.props;
---

<div
  data-index={index}
  data-category={category ?? ""}
  class="group flex flex-col h-full overflow-hidden rounded-2xl bg-white border border-slate-200 shadow-sm transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
>
  <div class="relative overflow-hidden aspect-video">
    <img
      src={image}
      alt={`image from project ${title}`}
      class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
    />
    <div class="absolute inset-0 bg-slate-900/10 group-hover:bg-transparent transition-colors duration-300"></div>
  </div>

  <div class="flex grow flex-col p-6">
    <span class="text-[10px] uppercase tracking-widest font-bold text-emerald-600 mb-2">
      {category || "Technical Project"}
    </span>

    <h3 class="text-xl font-bold text-slate-900 mb-3 group-hover:text-emerald-600 transition-colors">
      {title}
    </h3>

    <p class="text-sm text-slate-600 leading-relaxed mb-6 line-clamp-3">
      {description}
    </p>

    <div class="mt-auto">
      <div class="flex flex-wrap gap-2 mb-6">
        {technologies.map((tech) => (
          <span class="rounded-lg bg-slate-50 border border-slate-100 text-slate-500 px-2.5 py-1 text-[11px] font-medium">
            {tech}
          </span>
        ))}
      </div>

      <div class="flex items-center gap-6 pt-4 border-t border-slate-100">
        <a
          class="flex items-center gap-1 text-sm font-bold text-slate-900 hover:text-emerald-600 transition-colors"
          target="_blank"
          rel="noopener noreferrer"
          href={demo}
        >
          Live Demo
          <HiArrowRight size={16} />
        </a>

        <a
          class="flex items-center gap-1 text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors"
          href={code}
          target="_blank"
          rel="noopener noreferrer"
        >
          Source Code
        </a>

          {moreDetails && (
    <a
      class="flex items-center gap-1 text-sm font-bold text-emerald-600 hover:text-emerald-700 transition-colors"
      href={moreDetails}
    >
      Case Study
      <HiArrowRight size={16} />
    </a>
  )}
      </div>
    </div>
  </div>
</div>